<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise 예제</title>
</head>
<body>
    <script>
        let count = 0;
        //매개변수로 콜백 함수가 필요함
        let promise = new Promise(function(resolve, reject){
            
            //작업

            //작업 완료 후 성공 조건에 따라 resolve 또는 reject를 호출
            if(count < 3){
                resolve();
            }else{
                reject();
            }
        });
        promise.then(function(){  //then은 resolve껄 받아오는데 count = 3일 경우 if에서 걸리므로 에러 발생됨 그럴때 catch로 처리할수있도록 함 
            console.log("작업 완료."); //then 비동기 통신 처리라서 순서대로 작성해도 최근꺼가 위로 올라온다
        }).catch(function(){
            console.log("에러 발생");
        }).finally(function(){  //finally는 위에서 에러나던 말던 무조건 실행
            console.log("종료합니다.")
        })
        console.log("작업 중입니다.");
    </script>
</body>
</html>